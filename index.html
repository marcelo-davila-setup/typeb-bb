<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adriana Sousa - Transformação Mental</title>
    
    <!-- Meta Tags para Meta Ads e SEO -->
    <meta name="description" content="Transformação mental personalizada com Adriana Sousa. Especialista em desenvolvimento pessoal e autoconhecimento.">
    <meta property="og:title" content="Adriana Sousa - Transformação Mental">
    <meta property="og:description" content="Transformação mental personalizada para sua região. Desperte seu potencial com técnicas comprovadas.">
    <meta property="og:image" content="https://pub-e40d9ad14e5a4e13b2bfe7e2ae67bb03.r2.dev/Adriana-vmake%20(1).png">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    
    <!-- Preload otimizado -->
    <link rel="preload" as="image" href="https://pub-e40d9ad14e5a4e13b2bfe7e2ae67bb03.r2.dev/Adriana-vmake%20(1).png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg: #F8F5F0;
            --text: #33353A;
            --accent: #D4AF37;
            --dark: #1A2035;
            --white: #ffffff;
            --purple: #7C3AED;
            --gold-gradient: linear-gradient(135deg, #D4AF37 0%, #FFD700 70%, #B8860B 100%);
            --shadow-luxury: 0 15px 50px rgba(26, 32, 53, 0.2);
            
            /* Cores para cada frase */
            --cor-estado: #FF6B35;        /* Laranja vibrante */
            --cor-gentilico: #7C3AED;     /* Roxo */
            --cor-horario: #059669;       /* Verde */
            --cor-pergunta: #DC2626;      /* Vermelho */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #F8F5F0 0%, #E8E5E0 100%);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            background-attachment: fixed;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            margin: 0;
        }

        .container {
            width: 100%;
            max-width: 100%;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .avatar-section {
            text-align: center;
            padding: 16px 12px 12px;
            background: var(--white);
            border-radius: 20px;
            box-shadow: var(--shadow-luxury);
            border: 2px solid rgba(212, 175, 55, 0.3);
            transition: all 1s ease;
            position: relative;
            width: 100%;
            max-width: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .header-info {
            margin-bottom: 12px;
            width: 100%;
        }

        .name {
            font-size: 24px;
            font-weight: 900;
            background: var(--gold-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 4px;
            line-height: 1.2;
        }

        .specialty {
            font-size: 14px;
            font-weight: 700;
            color: var(--purple);
            margin-bottom: 8px;
            line-height: 1.3;
        }

        .avatar-container {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
        }

        .avatar {
            width: 320px;
            height: 480px;
            object-fit: cover;
            object-position: center top;
            border-radius: 16px;
            border: 2px solid rgba(212, 175, 55, 0.3);
            box-shadow: var(--shadow-luxury);
            transition: all 0.5s ease;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
            will-change: transform;
            display: block;
        }

        .avatar-message {
            position: absolute;
            top: 22%;
            left: 58%;
            transform: translateX(-50%);
            width: 160px;
            font-size: 14px;
            font-weight: 900;
            color: var(--dark);
            text-align: center;
            opacity: 0;
            transition: all 0.6s ease;
            text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.9);
            padding: 8px 10px;
            background: transparent;
            border-radius: 8px;
            line-height: 1.3;
            z-index: 10;
            border-right: 3px solid transparent;
        }

        .avatar-message.show {
            opacity: 1;
            transform: translateX(-50%) scale(1);
        }

        /* Cores específicas para cada tipo de mensagem */
        .avatar-message.fase-estado {
            color: var(--cor-estado);
            border-right-color: var(--cor-estado);
        }

        .avatar-message.fase-gentilico {
            color: var(--cor-gentilico);
            border-right-color: var(--cor-gentilico);
        }

        .avatar-message.fase-horario {
            color: var(--cor-horario);
            border-right-color: var(--cor-horario);
        }

        .avatar-message.fase-pergunta {
            color: var(--cor-pergunta);
            border-right-color: var(--cor-pergunta);
            font-size: 16px;
        }

        /* Efeito de cursor piscando (typewriter) */
        .avatar-message.typing {
            border-right: 3px solid currentColor;
            animation: blinkCursor 1s infinite;
        }

        @keyframes blinkCursor {
            0%, 50% { border-right-color: currentColor; }
            51%, 100% { border-right-color: transparent; }
        }

        /* Responsivo para diferentes tamanhos de tela */
        @media (max-width: 480px) {
            .container {
                padding: 8px;
            }
            
            .avatar-section {
                padding: 12px 8px 8px;
                border-radius: 16px;
                max-width: 95%;
            }
            
            .avatar {
                width: 280px;
                height: 420px;
                border-radius: 14px;
            }
            
            .avatar-message {
                top: 20%;
                left: 60%;
                width: 140px;
                font-size: 12px;
            }
            
            .avatar-message.fase-pergunta {
                font-size: 14px;
            }
            
            .name {
                font-size: 20px;
            }

            .specialty {
                font-size: 12px;
            }
        }

        @media (max-width: 360px) {
            .avatar-section {
                padding: 10px 6px 6px;
                max-width: 98%;
            }
            
            .avatar {
                width: 240px;
                height: 360px;
                border-radius: 12px;
            }
            
            .avatar-message {
                top: 18%;
                left: 62%;
                width: 120px;
                font-size: 11px;
            }

            .avatar-message.fase-pergunta {
                font-size: 13px;
            }

            .name {
                font-size: 18px;
            }

            .specialty {
                font-size: 11px;
            }
        }

        /* Para integração com Typebot */
        @media (min-width: 481px) and (max-width: 768px) {
            .avatar-section {
                max-width: 420px;
            }
            
            .avatar {
                width: 340px;
                height: 510px;
            }
            
            .avatar-message {
                width: 170px;
                left: 55%;
            }

            .name {
                font-size: 26px;
            }

            .specialty {
                font-size: 15px;
            }
        }

        @media (min-width: 769px) {
            .avatar-section {
                max-width: 450px;
            }
            
            .avatar {
                width: 360px;
                height: 540px;
            }
            
            .avatar-message {
                width: 180px;
                left: 55%;
            }

            .name {
                font-size: 28px;
            }

            .specialty {
                font-size: 16px;
            }
        }

        /* Animação suave para entrada */
        .avatar-section {
            animation: fadeInUp 0.8s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="avatar-section">
            <div class="header-info">
                <div class="name">Adriana Sousa</div>
                <div class="specialty">Especialista em Transformação Mental</div>
            </div>
            
            <div class="avatar-container">
                <img src="https://pub-e40d9ad14e5a4e13b2bfe7e2ae67bb03.r2.dev/Adriana-vmake%20(1).png" 
                     alt="Adriana Sousa - Especialista em Transformação Mental" 
                     class="avatar"
                     loading="eager">
                <div id="avatarMessage" class="avatar-message">Detectando sua região...</div>
            </div>
        </div>
    </div>

    <script>
        // ==================== SISTEMA COMPLETO: 26 ESTADOS + DF + GÍRIAS CORRIGIDAS ====================
        
        const SISTEMA_COMPLETO = {
            // Configuração de Estados com Gírias Corrigidas
            ESTADOS_CONFIG: {
                // REGIÃO NORTE (7 estados)
                'AC': { 
                    sigla: 'AC', 
                    nome: 'Acre',
                    gentilico: 'Acreana', 
                    expressao: 'rapaz!',
                    timezone: 'America/Rio_Branco',
                    utc: -5
                },
                'AM': { 
                    sigla: 'AM', 
                    nome: 'Amazonas',
                    gentilico: 'Amazonense', 
                    expressao: 'mana!',
                    timezone: 'America/Manaus',
                    utc: -4
                },
                'AP': { 
                    sigla: 'AP', 
                    nome: 'Amapá',
                    gentilico: 'Amapaense', 
                    expressao: 'mana!',
                    timezone: 'America/Sao_Paulo',
                    utc: -3
                },
                'PA': { 
                    sigla: 'PA', 
                    nome: 'Pará',
                    gentilico: 'Paraense', 
                    expressao: 'mana!',
                    timezone: 'America/Sao_Paulo',
                    utc: -3
                },
                'RO': { 
                    sigla: 'RO', 
                    nome: 'Rondônia',
                    gentilico: 'Rondoniense', 
                    expressao: 'ué!',
                    timezone: 'America/Porto_Velho',
                    utc: -4
                },
                'RR': { 
                    sigla: 'RR', 
                    nome: 'Roraima',
                    gentilico: 'Roraimense', 
                    expressao: 'rapaz!',
                    timezone: 'America/Boa_Vista',
                    utc: -4
                },
                'TO': { 
                    sigla: 'TO', 
                    nome: 'Tocantins',
                    gentilico: 'Tocantinense', 
                    expressao: 'sô!',
                    timezone: 'America/Sao_Paulo',
                    utc: -3
                },

                // REGIÃO NORDESTE (9 estados)
                'AL': { 
                    sigla: 'AL', 
                    nome: 'Alagoas',
                    gentilico: 'Alagoana', 
                    expressao: 'oxe!',
                    timezone: 'America/Sao_Paulo',
                    utc: -3
                },
                'BA': { 
                    sigla: 'BA', 
                    nome: 'Bahia',
                    gentilico: 'Baiana', 
                    expressao: 'oxente!',
                    timezone: 'America/Sao_Paulo',
                    utc: -3
                },
                'CE': { 
                    sigla: 'CE', 
                    nome: 'Ceará',
                    gentilico: 'Cearense', 
                    expressao: 'eita!',
                    timezone: 'America/Fortaleza',
                    utc: -3
                },
                'MA': { 
                    sigla: 'MA', 
                    nome: 'Maranhão',
                    gentilico: 'Maranhense', 
                    expressao: 'rapaz!',
                    timezone: 'America/Sao_Paulo',
                    utc: -3
                },
                'PB': { 
                    sigla: 'PB', 
                    nome: 'Paraíba',
                    gentilico: 'Paraibana', 
                    expressao: 'oxe!',
                    timezone: 'America/Sao_Paulo',
                    utc: -3
                },
                'PE': { 
                    sigla: 'PE', 
                    nome: 'Pernambuco',
                    gentilico: 'Pernambucana', 
                    expressao: 'oxente!',
                    timezone: 'America/Recife',
                    utc: -3
                },
                'PI': { 
                    sigla: 'PI', 
                    nome: 'Piauí',
                    gentilico: 'Piauiense', 
                    expressao: 'véi!',
                    timezone: 'America/Sao_Paulo',
                    utc: -3
                },
                'RN': { 
                    sigla: 'RN', 
                    nome: 'Rio Grande do Norte',
                    gentilico: 'Potiguar', 
                    expressao: 'oxe!',
                    timezone: 'America/Sao_Paulo',
                    utc: -3
                },
                'SE': { 
                    sigla: 'SE', 
                    nome: 'Sergipe',
                    gentilico: 'Sergipana', 
                    expressao: 'oxe!',
                    timezone: 'America/Sao_Paulo',
                    utc: -3
                },

                // REGIÃO CENTRO-OESTE (3 estados + DF)
                'DF': { 
                    sigla: 'DF', 
                    nome: 'Distrito Federal',
                    gentilico: 'Brasiliense', 
                    expressao: 'meu!',
                    timezone: 'America/Sao_Paulo',
                    utc: -3
                },
                'GO': { 
                    sigla: 'GO', 
                    nome: 'Goiás',
                    gentilico: 'Goiana', 
                    expressao: 'sô!',
                    timezone: 'America/Sao_Paulo',
                    utc: -3
                },
                'MT': { 
                    sigla: 'MT', 
                    nome: 'Mato Grosso',
                    gentilico: 'Mato-grossense', 
                    expressao: 'trem!',
                    timezone: 'America/Cuiaba',
                    utc: -4
                },
                'MS': { 
                    sigla: 'MS', 
                    nome: 'Mato Grosso do Sul',
                    gentilico: 'Sul-mato-grossense', 
                    expressao: 'trem!',
                    timezone: 'America/Campo_Grande',
                    utc: -4
                },

                // REGIÃO SUDESTE (4 estados) - CORREÇÕES AQUI
                'ES': { 
                    sigla: 'ES', 
                    nome: 'Espírito Santo',
                    gentilico: 'Capixaba', 
                    expressao: 'Canel Verde!',  // ✅ CORRIGIDO
                    timezone: 'America/Sao_Paulo',
                    utc: -3
                },
                'MG': { 
                    sigla: 'MG', 
                    nome: 'Minas Gerais',
                    gentilico: 'Mineira', 
                    expressao: 'uai!',
                    timezone: 'America/Sao_Paulo',
                    utc: -3
                },
                'RJ': { 
                    sigla: 'RJ', 
                    nome: 'Rio de Janeiro',
                    gentilico: 'Carioca', 
                    expressao: 'cara!',
                    timezone: 'America/Sao_Paulo',
                    utc: -3
                },
                'SP': { 
                    sigla: 'SP', 
                    nome: 'São Paulo',
                    gentilico: 'Paulista', 
                    expressao: 'nossa!',  // ✅ CORRIGIDO
                    timezone: 'America/Sao_Paulo',
                    utc: -3
                },

                // REGIÃO SUL (3 estados)
                'PR': { 
                    sigla: 'PR', 
                    nome: 'Paraná',
                    gentilico: 'Paranaense', 
                    expressao: 'guria!',
                    timezone: 'America/Sao_Paulo',
                    utc: -3
                },
                'RS': { 
                    sigla: 'RS', 
                    nome: 'Rio Grande do Sul',
                    gentilico: 'Gaúcha', 
                    expressao: 'tchê!',
                    timezone: 'America/Sao_Paulo',
                    utc: -3
                },
                'SC': { 
                    sigla: 'SC', 
                    nome: 'Santa Catarina',
                    gentilico: 'Catarinense', 
                    expressao: 'né!',
                    timezone: 'America/Sao_Paulo',
                    utc: -3
                }
            },

            // Mensagens baseadas no horário e dia da semana
            getMensagemTempo: function(hora, dia, estado) {
                const config = this.ESTADOS_CONFIG[estado] || this.ESTADOS_CONFIG['SP'];
                const expressao = config.expressao;
                
                // Sexta-feira especial
                if (dia === 5) {
                    if (hora >= 6 && hora < 12) return `Bom dia, ${expressao} SEXTOU!!`;
                    if (hora >= 12 && hora < 18) return `Boa tarde, ${expressao} SEXTOU!!`;
                    if (hora >= 18 && hora < 22) return `Boa noite, ${expressao} SEXTOU!!`;
                    return `Boa madrugada, ${expressao} SEXTOU!!`;
                }
                
                // Sábado
                if (dia === 6) {
                    if (hora >= 6 && hora < 12) return `Bom dia, ${expressao} É sábado!!`;
                    if (hora >= 12 && hora < 18) return `Boa tarde, ${expressao} Sábado!!`;
                    if (hora >= 18 && hora < 22) return `Boa noite, ${expressao} Sábado!!`;
                    return `Boa madrugada, ${expressao}`;
                }
                
                // Domingo  
                if (dia === 0) {
                    if (hora >= 6 && hora < 12) return `Bom dia, ${expressao} DOMINGOU!!`;
                    if (hora >= 12 && hora < 18) return `Boa tarde, ${expressao} Domingo!!`;
                    if (hora >= 18 && hora < 22) return `Boa noite, ${expressao} Domingo!!`;
                    return `Boa madrugada, ${expressao}`;
                }
                
                // Dias da semana normais
                if (hora >= 6 && hora < 12) return `Bom dia, ${expressao}`;
                if (hora >= 12 && hora < 18) return `Boa tarde, ${expressao}`;
                if (hora >= 18 && hora < 22) return `Boa noite, ${expressao}`;
                return `Boa madrugada, ${expressao}`;
            },

            // Calcular horário local baseado no timezone do estado
            getHorarioLocal: function(estado) {
                const agora = new Date();
                const config = this.ESTADOS_CONFIG[estado] || this.ESTADOS_CONFIG['SP'];
                
                try {
                    const horarioLocal = new Date(agora.toLocaleString("en-US", {timeZone: config.timezone}));
                    return {
                        hora: horarioLocal.getHours(),
                        minuto: horarioLocal.getMinutes(),
                        dia: horarioLocal.getDay(),
                        formatado: `${horarioLocal.getHours().toString().padStart(2, '0')}:${horarioLocal.getMinutes().toString().padStart(2, '0')}`
                    };
                } catch (error) {
                    // Fallback para horário do navegador
                    return {
                        hora: agora.getHours(),
                        minuto: agora.getMinutes(),
                        dia: agora.getDay(),
                        formatado: `${agora.getHours().toString().padStart(2, '0')}:${agora.getMinutes().toString().padStart(2, '0')}`
                    };
                }
            },

            // Gerar sequência completa personalizada
            gerarSequencia: function(estado) {
                const config = this.ESTADOS_CONFIG[estado] || this.ESTADOS_CONFIG['SP'];
                const tempo = this.getHorarioLocal(estado);
                const mensagemTempo = this.getMensagemTempo(tempo.hora, tempo.dia, estado);
                
                return [
                    {
                        texto: config.sigla,
                        classe: 'fase-estado'
                    },
                    {
                        texto: `É ${config.gentilico}, ${config.expressao}`,
                        classe: 'fase-gentilico'
                    },
                    {
                        texto: `${tempo.formatado} - ${mensagemTempo}`,
                        classe: 'fase-horario'
                    },
                    {
                        texto: "Como as pessoas que TE AMAM TE CHAMAM? 👇",
                        classe: 'fase-pergunta'
                    }
                ];
            }
        };

        // ==================== DETECÇÃO ROBUSTA COM 6 APIS + FALLBACKS ====================
        
        async function detectUserLocation() {
            const apis = [
                // API Primária (mais confiável)
                {
                    url: 'https://ipapi.co/json/',
                    parse: (data) => ({
                        regiao: data.region?.toLowerCase() || '',
                        cidade: data.city || 'Brasil',
                        pais: data.country_code || ''
                    })
                },
                // APIs Secundárias
                {
                    url: 'https://get.geojs.io/v1/ip/geo.json',
                    parse: (data) => ({
                        regiao: data.region?.toLowerCase() || '',
                        cidade: data.city || 'Brasil',
                        pais: data.country_code || ''
                    })
                },
                {
                    url: 'http://ip-api.com/json/',
                    parse: (data) => ({
                        regiao: data.regionName?.toLowerCase() || '',
                        cidade: data.city || 'Brasil',
                        pais: data.countryCode || ''
                    })
                },
                {
                    url: 'https://ipwhois.app/json/',
                    parse: (data) => ({
                        regiao: data.region?.toLowerCase() || '',
                        cidade: data.city || 'Brasil',
                        pais: data.country_code || ''
                    })
                },
                // APIs Extras (fallback)
                {
                    url: 'https://api.ipify.org?format=json',
                    parse: (data) => ({
                        regiao: '',
                        cidade: 'Brasil',
                        pais: 'BR',
                        ip: data.ip
                    })
                },
                {
                    url: 'https://httpbin.org/ip',
                    parse: (data) => ({
                        regiao: '',
                        cidade: 'Brasil', 
                        pais: 'BR',
                        ip: data.origin
                    })
                }
            ];

            for (let i = 0; i < apis.length; i++) {
                const api = apis[i];
                try {
                    console.log(`Tentando API ${i + 1}/${apis.length}: ${api.url}`);
                    
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 4000);
                    
                    const response = await fetch(api.url, {
                        signal: controller.signal,
                        headers: { 
                            'Accept': 'application/json',
                            'User-Agent': 'Mozilla/5.0 (compatible; AdrianaBot/1.0)'
                        }
                    });
                    
                    clearTimeout(timeoutId);
                    
                    if (!response.ok) throw new Error(`HTTP ${response.status}`);
                    
                    const data = await response.json();
                    const parsed = api.parse(data);
                    
                    console.log(`Sucesso API ${i + 1}:`, parsed);
                    
                    // Verificar se é Brasil e se tem região
                    if (parsed.regiao && (parsed.pais === 'BR' || parsed.pais === 'Brazil' || !parsed.pais)) {
                        const estado = mapearEstado(parsed.regiao);
                        if (estado) {
                            console.log(`Estado detectado: ${estado} via API ${i + 1}`);
                            return { estado, cidade: parsed.cidade };
                        }
                    }
                    
                } catch (error) {
                    console.log(`Erro API ${i + 1} (${api.url}):`, error.message);
                    continue;
                }
            }
            
            // FALLBACK 1: Timezone do navegador
            console.log('Iniciando fallback por timezone...');
            try {
                const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
                console.log(`Timezone detectado: ${timezone}`);
                
                const timezoneMap = {
                    'America/Sao_Paulo': 'SP',
                    'America/Fortaleza': 'CE', 
                    'America/Recife': 'PE',
                    'America/Manaus': 'AM',
                    'America/Campo_Grande': 'MS',
                    'America/Cuiaba': 'MT',
                    'America/Porto_Velho': 'RO',
                    'America/Rio_Branco': 'AC',
                    'America/Boa_Vista': 'RR'
                };
                
                for (const [tz, estado] of Object.entries(timezoneMap)) {
                    if (timezone.includes(tz)) {
                        console.log(`Estado detectado por timezone: ${estado}`);
                        return { estado, cidade: 'Brasil' };
                    }
                }
                
                // Se é timezone brasileiro mas não específico, assumir SP
                if (timezone.includes('America') || timezone.includes('Brazil')) {
                    return { estado: 'SP', cidade: 'Brasil' };
                }
                
            } catch (timezoneError) {
                console.log('Erro no fallback timezone:', timezoneError);
            }
            
            // FALLBACK FINAL: São Paulo como padrão
            console.log('Usando fallback final: São Paulo');
            return { estado: 'SP', cidade: 'Brasil' };
        }

        function mapearEstado(regiao) {
            const mapeamento = {
                // Nomes completos
                'acre': 'AC', 'amazonas': 'AM', 'amapá': 'AP', 'amapa': 'AP',
                'pará': 'PA', 'para': 'PA', 'rondônia': 'RO', 'rondonia': 'RO',
                'roraima': 'RR', 'tocantins': 'TO',
                
                'alagoas': 'AL', 'bahia': 'BA', 'ceará': 'CE', 'ceara': 'CE',
                'maranhão': 'MA', 'maranhao': 'MA', 'paraíba': 'PB', 'paraiba': 'PB',
                'pernambuco': 'PE', 'piauí': 'PI', 'piaui': 'PI',
                'rio grande do norte': 'RN', 'sergipe': 'SE',
                
                'distrito federal': 'DF', 'brasília': 'DF', 'brasilia': 'DF',
                'goiás': 'GO', 'goias': 'GO', 'mato grosso': 'MT',
                'mato grosso do sul': 'MS',
                
                'espírito santo': 'ES', 'espirito santo': 'ES',
                'minas gerais': 'MG', 'rio de janeiro': 'RJ',
                'são paulo': 'SP', 'sao paulo': 'SP',
                
                'paraná': 'PR', 'parana': 'PR', 'rio grande do sul': 'RS',
                'santa catarina': 'SC',
                
                // Siglas
                'ac': 'AC', 'am': 'AM', 'ap': 'AP', 'pa': 'PA', 'ro': 'RO',
                'rr': 'RR', 'to': 'TO', 'al': 'AL', 'ba': 'BA', 'ce': 'CE',
                'ma': 'MA', 'pb': 'PB', 'pe': 'PE', 'pi': 'PI', 'rn': 'RN',
                'se': 'SE', 'df': 'DF', 'go': 'GO', 'mt': 'MT', 'ms': 'MS',
                'es': 'ES', 'mg': 'MG', 'rj': 'RJ', 'sp': 'SP', 'pr': 'PR',
                'rs': 'RS', 'sc': 'SC',
                
                // Variações comuns
                'state of são paulo': 'SP', 'state of rio de janeiro': 'RJ',
                'state of minas gerais': 'MG', 'state of bahia': 'BA',
                'state of paraná': 'PR', 'state of rio grande do sul': 'RS'
            };
            
            const estadoEncontrado = mapeamento[regiao.toLowerCase()];
            if (estadoEncontrado) {
                console.log(`Mapeamento: "${regiao}" -> ${estadoEncontrado}`);
            }
            return estadoEncontrado || null;
        }

        // ==================== EFEITO TYPEWRITER COM CORES ====================
        
        async function typewriterEffect(element, texto, velocidade = 80) {
            element.textContent = '';
            element.classList.add('typing');
            
            for (let i = 0; i < texto.length; i++) {
                element.textContent += texto.charAt(i);
                await sleep(velocidade);
            }
            
            element.classList.remove('typing');
        }

        async function startAvatarSequence() {
            const message = document.getElementById('avatarMessage');
            
            try {
                // Detectar localização
                const location = await detectUserLocation();
                console.log('Localização final detectada:', location);
                
                // Gerar sequência personalizada
                const sequencia = SISTEMA_COMPLETO.gerarSequencia(location.estado);
                console.log('Sequência personalizada:', sequencia);
                
                // Executar sequência de mensagens com cores e typewriter
                for (let i = 0; i < sequencia.length; i++) {
                    const item = sequencia[i];
                    
                    // Limpar classes e ocultar
                    message.className = 'avatar-message';
                    message.style.opacity = '0';
                    await sleep(200);
                    
                    // Adicionar classe da fase e mostrar
                    message.classList.add(item.classe);
                    message.style.opacity = '1';
                    
                    // Aplicar efeito typewriter
                    await typewriterEffect(message, item.texto, 60); // Velocidade rápida
                    
                    // Pausa entre frases
                    await sleep(i === 2 ? 2500 : 1500);
                }
            } catch (error) {
                console.error('Erro na sequência do avatar:', error);
                // Fallback de emergência
                message.textContent = "Como as pessoas que TE AMAM TE CHAMAM? 👇";
                message.classList.add('fase-pergunta');
                message.style.opacity = '1';
            }
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // ==================== INICIALIZAÇÃO ====================
        
        console.log('Sistema COMPLETO carregado: 26 estados + DF + cores + typewriter');
        console.log('Estados configurados:', Object.keys(SISTEMA_COMPLETO.ESTADOS_CONFIG).length);
        console.log('Correções: SP = "nossa!" | ES = "Canel Verde!"');
        
        // Iniciar sequência após 2 segundos
        setTimeout(() => {
            startAvatarSequence();
        }, 2000);
        
    </script>
</body>
</html>
